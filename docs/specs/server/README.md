# ReuseBackupServer 仕様書

## 概要

ReuseBackupServerは、古いiPhone（iOS 15.0+）をローカルバックアップサーバーとして再利用するためのアプリケーションです。

## 主な機能

### 1. HTTPサーバー機能
- **ポート**: 8080（デフォルト）
- **プロトコル**: HTTP/1.1
- **リクエスト形式**: JSON
- **レスポンス形式**: JSON

### 2. サーバー状態管理
- **サーバー状態**: 停止中 / 開始中 / 稼働中 / 停止中 / エラー
- **状態表示**: リアルタイムでのステータス表示
- **ポート表示**: 現在のサーバーポート番号表示

### 3. Bonjourサービス発見
- **サービスタイプ**: `_reuse-backup._tcp`
- **自動発見**: ネットワーク上のクライアントから自動発見可能
- **サービス名**: デバイス固有名

### 4. メッセージ受信・表示
- **受信ログ**: クライアントからのメッセージをリアルタイム表示
- **メッセージ管理**: 受信したメッセージの一覧表示
- **ログクリア**: 受信メッセージログのクリア機能

## ユーザーインターフェース

### メイン画面
- **アプリタイトル**: "ReuseBackup Server"
- **サブタイトル**: "古いiPhoneをバックアップサーバーに"
- **アイコン**: サーバーラックアイコン

### サーバーステータス表示
- **状態インジケーター**: 色分けされた円形インジケーター
  - 緑色: 稼働中
  - オレンジ色: 開始中/停止中
  - 赤色: エラー状態
  - 灰色: 停止中
- **ステータステキスト**: 現在の状態を日本語で表示
- **ポート番号**: サーバーが使用中のポート番号表示
- **エラーメッセージ**: エラー時の詳細メッセージ表示

### メッセージ一覧
- **受信メッセージ**: クライアントから受信したメッセージを時系列で表示
- **空状態**: メッセージがない場合の表示
- **クリアボタン**: 受信メッセージをクリアする機能

### サーバー制御
- **開始/停止ボタン**: サーバーの開始・停止制御
- **状態に応じたボタン表示**: 現在の状態に応じたボタンテキスト変更

## 対応デバイス・OS

- **対応OS**: iOS 15.0以上
- **対応デバイス**: iPhone（古いモデル推奨）
- **ネットワーク**: WiFi接続必須

## 制限事項

- **同時接続**: 複数クライアントからの同時接続対応
- **メッセージ長**: 最大1000文字
- **ネットワーク**: ローカルネットワーク内のみ
- **セキュリティ**: 基本的なHTTP通信（暗号化なし）

## 関連仕様

- **[API仕様](../api/README.md)** - サーバーが提供するAPI詳細
- **[ネットワーク仕様](../network/README.md)** - Bonjourサービス発見詳細
- **[メッセージング機能](../features/messaging.md)** - メッセージ処理詳細