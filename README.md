# ReuseBackup - プロジェクト概要

## アプリの目的

**ReuseBackup**は、使わなくなった古いiPhoneを有効活用して写真・動画のローカルバックアップを行うアプリです。

## 核となる価値

- **古いデバイスの再活用**: 使わなくなったiPhoneに新しい価値を与える
- **ローカルバックアップ**: クラウドに依存しない個人的なバックアップ
- **プライバシー保護**: データが手元に残る
- **コスト削減**: 月額料金不要

## アプリ構成

### ReuseBackup - Photo & Video for Old Phone
- **対象**: 使わなくなった古いiPhone  
- **役割**: サーバー専用
- **機能**: 写真・動画データの保存・提供、最小限のUI

### ReuseBackup - Photo & Video for New Phone  
- **対象**: 現在使用中の新しいiPhone  
- **役割**: クライアント専用
- **機能**: 古いiPhoneの発見・接続、写真・動画の表示・操作

## 技術構成

- **通信方式**: HTTP + Bonjour
- **通信方向**: クライアント → サーバー（一方向）
- **古いスマホ**: FlyingFox + Network Framework (iOS 15対応)
- **新しいスマホ**: URLSession + SwiftUI (iOS 17対応)

## 開発方針

- **開発期間**: MVP 2週間
- **リポジトリ**: モノレポ構成
- **リリース**: 別アプリとしてApp Store提出
- **価格**: 買い切り（600円〜1,200円）

## ブランチ戦略

### トランクベース開発戦略

本プロジェクトでは効率的な開発とコードレビューのため、以下のブランチ戦略を採用しています：

#### 基本フロー
1. **Issue作成** → 機能・バグ修正ごとにGitHub Issueを作成
2. **ブランチ作成** → `issue-{番号}-{説明}` 形式でブランチを作成
3. **初回コミット** → 最初のコミット後、直ちにdraft Pull Requestを作成
4. **継続開発** → ブランチで継続的に開発・コミット
5. **レビュー準備** → 実装完了時にPull Requestを「Ready for review」に変更
6. **自動レビュー** → PR がopenになったタイミングでClaude Codeによる自動レビューを実行
7. **マージ** → レビュー完了後、mainブランチにマージ

#### ブランチ命名規則
- `issue-{番号}-{機能名}`: 新機能開発
- `issue-{番号}-fix-{バグ内容}`: バグ修正  
- `issue-{番号}-refactor-{対象}`: リファクタリング
- `issue-{番号}-docs-{ドキュメント種類}`: ドキュメント更新

#### Pull Request運用
- **Draft作成**: 初回コミット時に自動でdraft PRを作成
- **継続的更新**: 開発中も定期的にコミット・プッシュで進捗を共有
- **Claude Codeレビュー**: PRがReady for reviewになった際にClaude Code自身が実行
- **マージ条件**: レビュー承認 + CI/CDパス後にマージ

#### コードレビュー機能
- **自動レビュー**: Claude CodeがPull Requestのコード変更を自動的にレビュー
- **レビュー観点**: 
  - コード品質とベストプラクティス準拠
  - 設計パターンとアーキテクチャの一貫性
  - セキュリティ上の問題や脆弱性
  - パフォーマンスと効率性
  - テストカバレッジと品質
- **フィードバック方法**: 必要に応じてレビューコメントを追加
- **承認プロセス**: レビュー完了後、適切と判断されればマージを実行

#### Issue管理ルール
- **Issue-PR連携**: Pull Requestタイトルに`Issue #{番号}:`を含めてIssueと紐づけ
- **自動クローズ**: Pull Requestがマージされた際、紐づいているIssueを自動的にClose
- **マージコミット**: マージ時のコミットメッセージにIssue番号を含める
- **ステータス更新**: Issue作業開始時にAssigneeを設定し、進捗を可視化

## テスト駆動開発

### TDD採用方針
本プロジェクトでは**テスト駆動開発(TDD)**を採用し、高品質で保守性の高いコードを実現します。

### 基本サイクル
1. **Red**: 失敗するテストを書く
2. **Green**: テストをパスする最小限のコードを実装  
3. **Refactor**: テストを維持しながらコードを改善

### テスト戦略
- **Unit Tests**: 個別クラス・メソッドの動作確認
- **Integration Tests**: コンポーネント間連携確認
- **End-to-End Tests**: アプリ全体動作確認

### 実装ルール
- テストファースト（実装前に必ずテスト作成）
- テストカバレッジ80%以上を目標
- `test_when条件_then期待結果` 命名規則
- Arrange-Act-Assert構造で統一